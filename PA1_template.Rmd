---
output:
  html_document:
    number_sections: yes
---
# Reproducible Research: Peer Assessment 1

Prakash Manandhar
2014-Dec-13


## Loading and preprocessing the data

Loads data into a variable named *activity*, and separates them into *steps*, *dates* and *intervals* columns.

```{r, echo=TRUE}
activity  <- read.csv('activity.csv')
steps     <- activity[1]
dates     <- activity[2]
intervals <- activity[3]
```

## What is mean total number of steps taken per day?

On examination, the data seems to be sufficiently structured that each day consists of a fixed number of intervals, and the days follow in chronological order. The number of intervals in a day, and number of days in the dataset are found as follows:

```{r, echo=TRUE, results='markup'}
NUM_POINTS    = dim(activity)[1]
NUM_INTERVALS = 24*60/5 # 24 hours x 60 minutes / 5 minutes
NUM_DAYS      = NUM_POINTS/NUM_INTERVALS
print(sprintf('There are %d days, and %d intevals in a day.', 
              NUM_DAYS, NUM_INTERVALS))
```

### Make a histogram of the total number of steps taken each day

First totaling the steps taken for each of the `r NUM_DAYS` days. Note that we are counting 'NA' steps as zero.

```{r, echo=TRUE, results='markup'}
num_steps = numeric( length = NUM_DAYS )
for ( i in 1:NUM_DAYS ) {
        index_start  = (i - 1)*NUM_INTERVALS + 1
        index_end    = index_start + NUM_INTERVALS - 1
        steps_in_day = steps[index_start:index_end, 1]
        num_steps[i] = sum( steps_in_day, na.rm = TRUE )
}
num_steps
```

Now plotting this data into a histogram:

```{r, echo=TRUE, results='markup'}
hist(num_steps, 
     breaks = 'Sturges',
     xlab='total number of steps walked in a day',
     main = "Histogram of total number of steps walked in a day")
```

Using more bins:

```{r, echo=TRUE, results='markup'}
hist(num_steps, 
             breaks = seq(0, 25000, 1000),
     xlab='total number of steps walked in a day',
     main = "Histogram of total number of steps walked in a day")
```


### Calculate and report the mean and median total number of steps taken per day

```{r, echo=TRUE, results='markup'}
summary(num_steps)
```

## What is the average daily activity pattern?

### Make a time series plot (i.e. type = "l") of the 5-minute interval (x-axis) and the average number of steps taken, averaged across all days (y-axis)

First we need to calculate the average number of steps taken, averaged across all days. We calculate the mean and median, and print them out per interval.

```{r, echo=TRUE, results='markup'}
mean_steps_interval   = numeric( length = NUM_INTERVALS )
median_steps_interval = numeric( length = NUM_INTERVALS )

for ( i in 1:NUM_INTERVALS ) {
        steps_interval = steps[ seq(i, NUM_POINTS, NUM_INTERVALS), 1 ]
        mean_steps_interval[i] = 
                mean( steps_interval, na.rm = TRUE )
        median_steps_interval[i] = 
                median( steps_interval, na.rm = TRUE )
        print(sprintf('[Interval %04d] Mean = %f, Median = %f', 
                      intervals[i, 1],
                      mean_steps_interval[i], 
                      median_steps_interval[i] )
              )
}

```

Plotting as a time series:
```{r, echo=TRUE, results='markup'}
plot(intervals[1:NUM_INTERVALS, 1], mean_steps_interval, type='l',
     xlab='time of day (e.g. 0000 is midnight, 1555 is 3:55 pm)',
     ylab='Mean',
     main='Mean number of steps taken during 5 min. time interval')

plot(intervals[1:NUM_INTERVALS, 1], median_steps_interval, type='l',
     xlab='time of day (e.g. 0000 is midnight, 1555 is 3:55 pm)',
     ylab='Median',
     main='Median number of steps taken during 5 min. time interval')
```

### Which 5-minute interval, on average across all the days in the dataset, contains the maximum number of steps?

Now calculating which interval has the maximum mean/median steps:

```{r, echo=TRUE, results='markup'}
print(sprintf(
        'The 5-minute interval with on average (mean) the maximum number of steps is %04d.', 
               intervals[which.max(mean_steps_interval), 1]))

print(sprintf(
        'The 5-minute interval with on average (median) the maximum number of steps is %04d.', 
               intervals[which.max(median_steps_interval), 1]))

```


## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
